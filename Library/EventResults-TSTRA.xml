<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="e804ba08-299f-423c-b871-4aeb6d393e6b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="EventResults-TSTRA" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="a2fc625e-2195-4104-9920-8b8b399f7323fileName">TestCase-1</con:setting><con:setting id="347caf68-ef6b-43ed-a451-ad3b19cd72cefileName">Copy-of-EventResults-TSTRA</con:setting><con:setting id="e804ba08-299f-423c-b871-4aeb6d393e6bfileName">EventResults-TSTRA</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="datasource" name="DataSource" id="663736fc-2792-445c-bbde-db4efeaade69"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3125608170017008</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982149</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">5298308170017010</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982150</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">7441808170017016</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982151</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">9827408170017004</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982152</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">8784508170017006</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982153</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">3967608170017014</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982154</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">6867408170017000</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982155</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">2562608170017002</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982156</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">2234408170017028</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982157</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">1853608170017030</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982158</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">6033808170017032</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982159</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">7785308170017036</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982160</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row><row><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">4755808170017038</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">5899982161</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config"/></xml-fragment>]]></row></con:configuration></con:dataSource><con:shared>true</con:shared><con:restartShared>true</con:restartShared><con:property>ETS_APT_ID</con:property><con:property>transaction_id</con:property><con:completeLastOperation>true</con:completeLastOperation><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="jdbc" name="getData" id="55c06b3a-c22c-4611-8ed6-edf0ac2466e4"><con:settings><con:setting id="prettyPrintResponse">true</con:setting></con:settings><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${DB-Driver}</con:driver><con:connectionString>${Database}</con:connectionString><con:password/><con:query>SELECT BKNG_ID FROM BKNG WHERE ETS_APNTMT_ID = ${DataSource#ETS_APT_ID}</con:query><con:assertion type="XPath Match" id="3c496848-5d97-420f-84ad-d1090ebfbe7b" name="Check count of [Row]"><con:configuration><path>count( //Results/ResultSet/Row)>0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="e11227c4-e213-476b-b494-856e944b5d8c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BKNG_ID</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>getData</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/BKNG_ID[1]</con:sourcePath><con:targetType>BKNG_ID</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>APT_ID</con:name><con:sourceType>ETS_APT_ID</con:sourceType><con:sourceStep>DataSource</con:sourceStep><con:sourcePath/><con:targetType>ETS_APNTMT_ID</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>transactionId</con:name><con:sourceType>transaction_id</con:sourceType><con:sourceStep>DataSource</con:sourceStep><con:targetType>transactionId</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="Properties" id="7b266740-bfdb-4da9-9744-bca3d632cf7e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>ETS_APNTMT_ID</con:name><con:value>4755808170017038</con:value></con:property><con:property><con:name>BKNG_ID</con:name><con:value>391897</con:value></con:property><con:property><con:name>ADMIN</con:name><con:value>20170826A</con:value></con:property><con:property><con:name>TestCenter</con:name><con:value>STNDEV3</con:value></con:property><con:property><con:name>transactionId</con:name><con:value>5899982161</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="EventResults-TSTRA" id="6310ae29-d75a-470c-b2cb-96e5942a200c"><con:settings/><con:config service="Event-Outcome-Results-Service" resourcePath="/ereg-appointment-service/rest/appointment/event" methodName="EventResults" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EventResults-TSTRA" id="6a12dc19-22f8-43c4-87b8-a9c474ca84e2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="password" value="1qaz@WSX"/>
  <con:entry key="clientId" value="CRDRM"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="programCode" value="TEL"/>
  <con:entry key="sourceSystemId" value="CRDRM"/>
  <con:entry key="username" value="Intsyseregdvi"/>
  <con:entry key="Content-Type" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:request>{  
"appointmentRequest":{  
      "appointment":{ 
                                "programCode": "TEL",
                                "regSysId": "ERS",
                                "etsAppointmentId": "${Properties#ETS_APNTMT_ID}",
                                "eventCategory": "RSLTS",
                                "eventType": "TSTRA",
                                "eventReceivedDateTime":"2017-09-11T05:05:00",
                                "testAdminId":"${Properties#ADMIN}",
                                "transactionId": "${Properties#transactionId}",
                                "transactionDate":"2017-09-10T11:05:00"
     }
   }
}</con:request><con:originalUri>https://v2-appointment-d2d.ereg.ets.org/ereg-appointment-service/rest/appointment</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d28fdb06-edac-4012-aef4-147d0c7f3948" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:environmentSpec><con:entry environmentId="3324844d-b697-4f50-83fd-939b32fc138d"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="1616f813-7e88-44f3-9295-00c26c282621"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="8d9a0c7e-6293-4ea0-ae89-48b18a6caf96"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="2c3ec9ec-bb1f-45d5-a8cc-50b0b05d3240"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="8a20f3d0-3ddd-42c2-9e03-779de7421e8a"><con:authProfile>No Authorization</con:authProfile></con:entry></con:environmentSpec></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="verify_BKNG_table" id="d3a352d6-ff91-40c2-8b57-f1cd59f7d2bd"><con:settings><con:setting id="prettyPrintResponse">true</con:setting></con:settings><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${DB-Driver}</con:driver><con:connectionString>${Database}</con:connectionString><con:password/><con:query>SELECT * from BKNG WHERE BKNG_ID = ${Properties#BKNG_ID}</con:query><con:assertion type="XPath Match" id="7cf0bee9-a1b7-48b8-8768-fd1ad3bd757b" name="Match content of [BKNG_STS_TYP_CDE]" disabled="true"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/BKNG_STS_TYP_CDE[1]/text()</path><content>RSRVD</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="8f729a21-0294-4757-bca5-94ece8e08ca4" name="Match content of [IBIS_TST_ADM_ID]"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/IBIS_TST_ADM_ID[1]</path><content>${Properties#ADMIN}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="verify_BKNG_EVNT_table" id="3b226674-ca56-4498-9b0a-daa0db21fdbf"><con:settings><con:setting id="prettyPrintResponse">true</con:setting></con:settings><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${DB-Driver}</con:driver><con:connectionString>${Database}</con:connectionString><con:password/><con:query>SELECT * from BKNG_EVNT WHERE BKNG_ID = ${Properties#BKNG_ID}</con:query><con:assertion type="XPath Match" id="3498006c-cc7b-48ec-b28a-85ab97e7745c" name="Match content of [BKNG_EVNT_CTGRY_TYP_CDE]"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/BKNG_EVNT_CTGRY_TYP_CDE[1]/text()</path><content>RSLTS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="7512f1cd-bd0d-4a49-b7e2-5e3aee24004d" name="Match content of [BKNG_EVNT_TYP_CDE]"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/BKNG_EVNT_TYP_CDE[1]/text()</path><content>TSTRA</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="d6d7292c-ee11-4c6b-8282-964e499ea88f" name="Match content of [BKNG_EVNT_DTM]"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/BKNG_EVNT_DTM[1]/text()</path><content>2017-9-11 5:5:0. 0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="verify_BKNG_ANLYS_RSLT_table" id="94196725-f105-4c5d-821b-ec111835b101"><con:settings><con:setting id="prettyPrintResponse">true</con:setting></con:settings><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>${DB-Driver}</con:driver><con:connectionString>${Database}</con:connectionString><con:password/><con:query>SELECT * from BKNG_ANLYS_RSLT WHERE BKNG_ID = ${Properties#BKNG_ID}</con:query><con:assertion type="XPath Match" id="b67cbe46-e332-4113-8293-6b9cf9216e67" name="Match content of [BKNG_ANLYS_TYP_CDE]"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/BKNG_ANLYS_TYP_CDE[1]/text()</path><content>VBERDY</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="cleanUpData" id="f1afd6e8-d6e5-4f3c-924f-a1cc4d167503" disabled="true"><con:settings/><con:config><script>import cleanup.EventOutcomeResultService;
EventOutcomeResultService CleanData = new EventOutcomeResultService(testRunner.testCase.testSuite.project.activeEnvironment.name);
log.info CleanData.cleanUpEventResults(context.expand( '${Properties#BKNG_ID}' ).toInteger());

</script></con:config></con:testStep><con:testStep type="datasourceloop" name="DataSource Loop" id="fc47bddc-8378-4e84-a7de-a3176abb8f26"><con:settings/><con:config><dataSourceStep>DataSource</dataSourceStep><targetStep>getData</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>b00d8e3d-8b54-42d2-94f8-e150d29a3b26</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>10844275-59b6-4bf2-b988-c74a006cca8e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ecf579fe-fcae-419c-832f-b6f779decdc1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb25070f-e0b3-4497-b182-10510f6a4792</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7e052101-949c-4ad9-9e51-4a4e8a6053c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1154fa16-c495-4004-82bc-febac639ddb8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>663736fc-2792-445c-bbde-db4efeaade69</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:environmentSpec><con:entry environmentId="1616f813-7e88-44f3-9295-00c26c282621"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="8d9a0c7e-6293-4ea0-ae89-48b18a6caf96"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="2c3ec9ec-bb1f-45d5-a8cc-50b0b05d3240"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:testCase>